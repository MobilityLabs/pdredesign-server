<div class="categories">
  <div ng-show="isConsensus" class="row sort-by">
    <ng-include
      ng-show="isConsensus"
      src="'client/views/shared/responses/sort_by.html'" >
    </ng-include>

    <ng-include
      ng-show="isConsensus"
      src="'client/views/shared/responses/filter_by_role.html'" >
    </ng-include>
  </div>
  <div class="category" ng-repeat="category in categories">
    <div class="row">
      <div>
        <p class="category-label" ng-click="toggleCategoryAnswers(category)">
          <i class="fa fa-chevron-right" ng-class="{'fa-chevron-down' : category.toggled == true}"></i>
          {{category.name}}
        </p>
      </div>
      <div class="question-container question-{{question.id}}" ng-repeat="question in category.questions">
        <div class="question-row" ng-click="toggleAnswers(question)">
          <div class="question">
            <p class="question-id scored-{{question.score.value}}" ng-show="question.loading">
              <i class="fa fa-spinner fa-spin"></i>
            </p>
            <p id="question-{{question.number}}" class="question-id {{questionColor(question, isConsensus)}}" ng-hide="question.loading">
              <a href="#question-{{question.id}}"></a>
              {{question.number}}
            </p>
          </div>
          <div class="question-content">
            <div>
              <p class="question-headline">
                {{question.headline}}
              </p>
              <p class="content">{{question.content}}</p>
            </div>



          </div>
        </div>
        <div class="answers" ng-show="question.answersVisible">
          <div class="answer" ng-repeat="answer in question.answers" ng-click="assignAnswerToQuestion(answer, question)">
            <div>
              <ng-include
                class="left-score"
                ng-show="isConsensus"
                src="'client/views/shared/responses/score_count.html'">
              </ng-include>
            </div>

            <div
              class="answer-row value-color-{{answer.value}}"
              ng-class="{scored{{answer.value}}: question.score.value == answer.value}">

              <div class="answer-info-row value-color-{{answer.value}}">
                <div class="scored-{{answer.value}} answer-value">
                  <span>{{answer.value}}</span>
                </div>
                <div class="answer-container">
                  <div class="answer-title title-{{answer.value}}">
                    {{answerTitle(answer.value)}}
                  </div>
                  <div class="answer-description" ng-bind-html="answer.content">
                  </div>
                  <ng-include
                    ng-hide="isConsensus"
                    src="'client/views/shared/responses/member_question.html'" >
                  </ng-include>
                </div>
              </div>

              <ng-include
                ng-show="isConsensus"
                src="'client/views/shared/responses/evidence.html'" >
              </ng-include>

              <ng-include
                ng-show="isConsensus"
                src="'client/views/shared/responses/consensus_score_entry.html'" >
              </ng-include>
            </div>
          </div>
            <skip-question
              editable="!isConsensus"
              question="question"
              response-id="{{responseId}}"
              assessment-id="{{assessmentId}}">
            </skip-question>
        </div>
      </div>
    </div>
  </div>
</div>
